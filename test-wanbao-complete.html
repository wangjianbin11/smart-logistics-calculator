<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‡é‚¦ç‰©æµå®Œæ•´æ•°æ®æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: #f9f9f9;
        }
        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .service-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }
        .service-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .country-list {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }
        .stats {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .test-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #2980b9;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
        }
        .error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš› ä¸‡é‚¦ç‰©æµå®Œæ•´æ•°æ®æµ‹è¯•</h1>
        
        <div class="stats">
            <h3>ğŸ“Š æ•°æ®ç»Ÿè®¡</h3>
            <div id="stats-content">åŠ è½½ä¸­...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ“¦ ä¸‡é‚¦ç‰©æµæœåŠ¡æ¦‚è§ˆ</h3>
            <div class="service-grid" id="service-overview">
                <div>åŠ è½½ä¸­...</div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ§® ä»·æ ¼è®¡ç®—æµ‹è¯•</h3>
            <div class="test-form">
                <div class="form-group">
                    <label for="service-select">é€‰æ‹©æœåŠ¡:</label>
                    <select id="service-select">
                        <option value="">è¯·é€‰æ‹©æœåŠ¡</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="country-select">é€‰æ‹©å›½å®¶:</label>
                    <select id="country-select">
                        <option value="">è¯·å…ˆé€‰æ‹©æœåŠ¡</option>
                    </select>
                </div>
                
                <div class="form-group" id="zone-group" style="display: none;">
                    <label for="zone-select">é€‰æ‹©åˆ†åŒº:</label>
                    <select id="zone-select">
                        <option value="">è¯·é€‰æ‹©åˆ†åŒº</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="weight-input">é‡é‡(KG):</label>
                    <input type="number" id="weight-input" step="0.01" min="0.01" placeholder="è¯·è¾“å…¥é‡é‡">
                </div>
                
                <button onclick="calculateShipping()">è®¡ç®—è¿è´¹</button>
                
                <div id="calculation-result"></div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ” è¯¦ç»†æ•°æ®æ£€æŸ¥</h3>
            <div id="data-details">
                <button onclick="showDetailedData()">æ˜¾ç¤ºè¯¦ç»†æ•°æ®</button>
                <div id="detailed-output"></div>
            </div>
        </div>
    </div>

    <script src="scripts/complete-database.js"></script>
    <script>
        let database;
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            try {
                database = new CompleteLogisticsDatabase();
                loadStatistics();
                loadServiceOverview();
                loadServiceOptions();
            } catch (error) {
                console.error('åˆå§‹åŒ–å¤±è´¥:', error);
                document.getElementById('stats-content').innerHTML = `<div class="error">åˆå§‹åŒ–å¤±è´¥: ${error.message}</div>`;
            }
        });

        function loadStatistics() {
            const services = database.getServices('ä¸‡é‚¦ç‰©æµ');
            let totalCountries = 0;
            let serviceDetails = [];
            
            Object.keys(services).forEach(serviceName => {
                const countries = database.getCountries('ä¸‡é‚¦ç‰©æµ', serviceName);
                totalCountries += countries.length;
                serviceDetails.push(`${serviceName}: ${countries.length}ä¸ªå›½å®¶`);
            });
            
            document.getElementById('stats-content').innerHTML = `
                <div><strong>æ€»æœåŠ¡æ•°:</strong> ${Object.keys(services).length}ä¸ª</div>
                <div><strong>æ€»å›½å®¶æ•°:</strong> ${totalCountries}ä¸ª</div>
                <div><strong>æœåŠ¡åˆ†å¸ƒ:</strong> ${serviceDetails.join(', ')}</div>
            `;
        }

        function loadServiceOverview() {
            const services = database.getServices('ä¸‡é‚¦ç‰©æµ');
            const container = document.getElementById('service-overview');
            
            container.innerHTML = Object.keys(services).map(serviceName => {
                const countries = database.getCountries('ä¸‡é‚¦ç‰©æµ', serviceName);
                return `
                    <div class="service-card">
                        <div class="service-title">${serviceName}</div>
                        <div><strong>æ”¯æŒå›½å®¶æ•°:</strong> ${countries.length}</div>
                        <div class="country-list">
                            <strong>å›½å®¶åˆ—è¡¨:</strong><br>
                            ${countries.join(', ')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadServiceOptions() {
            const services = database.getServices('ä¸‡é‚¦ç‰©æµ');
            const serviceSelect = document.getElementById('service-select');
            
            serviceSelect.innerHTML = '<option value="">è¯·é€‰æ‹©æœåŠ¡</option>' +
                Object.keys(services).map(service => 
                    `<option value="${service}">${service}</option>`
                ).join('');
        }

        function onServiceChange() {
            const service = document.getElementById('service-select').value;
            const countrySelect = document.getElementById('country-select');
            const zoneGroup = document.getElementById('zone-group');
            
            if (service) {
                const countries = database.getCountries('ä¸‡é‚¦ç‰©æµ', service);
                countrySelect.innerHTML = '<option value="">è¯·é€‰æ‹©å›½å®¶</option>' +
                    countries.map(country => 
                        `<option value="${country}">${country}</option>`
                    ).join('');
            } else {
                countrySelect.innerHTML = '<option value="">è¯·å…ˆé€‰æ‹©æœåŠ¡</option>';
            }
            
            zoneGroup.style.display = 'none';
        }

        function onCountryChange() {
            const service = document.getElementById('service-select').value;
            const country = document.getElementById('country-select').value;
            const zoneGroup = document.getElementById('zone-group');
            const zoneSelect = document.getElementById('zone-select');
            
            if (service && country) {
                const zones = database.getZones('ä¸‡é‚¦ç‰©æµ', service, country);
                if (zones && zones.length > 0) {
                    zoneGroup.style.display = 'block';
                    zoneSelect.innerHTML = '<option value="">è¯·é€‰æ‹©åˆ†åŒº</option>' +
                        zones.map(zone => 
                            `<option value="${zone}">${zone}</option>`
                        ).join('');
                } else {
                    zoneGroup.style.display = 'none';
                }
            } else {
                zoneGroup.style.display = 'none';
            }
        }

        function calculateShipping() {
            const service = document.getElementById('service-select').value;
            const country = document.getElementById('country-select').value;
            const weight = parseFloat(document.getElementById('weight-input').value);
            const zone = document.getElementById('zone-select').value;
            const resultDiv = document.getElementById('calculation-result');
            
            if (!service || !country || !weight) {
                resultDiv.innerHTML = '<div class="error">è¯·å¡«å†™å®Œæ•´ä¿¡æ¯</div>';
                return;
            }
            
            try {
                const result = database.calculateShipping('ä¸‡é‚¦ç‰©æµ', service, country, weight, zone || null);
                
                if (result.success) {
                    resultDiv.innerHTML = `
                        <div class="result">
                            <h4>ğŸ’° è¿è´¹è®¡ç®—ç»“æœ</h4>
                            <div><strong>ç‰©æµå…¬å¸:</strong> ä¸‡é‚¦ç‰©æµ</div>
                            <div><strong>æœåŠ¡ç±»å‹:</strong> ${service}</div>
                            <div><strong>ç›®çš„åœ°:</strong> ${country}${zone ? ` (${zone})` : ''}</div>
                            <div><strong>é‡é‡:</strong> ${weight}KG</div>
                            <div><strong>è¿è´¹:</strong> Â¥${result.shippingCost.toFixed(2)} (çº¦$${result.shippingCostUSD.toFixed(2)})</div>
                            <div><strong>æ“ä½œè´¹:</strong> Â¥${result.handlingFee.toFixed(2)} (çº¦$${result.handlingFeeUSD.toFixed(2)})</div>
                            <div><strong>æ€»è´¹ç”¨:</strong> Â¥${result.totalCost.toFixed(2)} (çº¦$${result.totalCostUSD.toFixed(2)})</div>
                            <div><strong>æ—¶æ•ˆ:</strong> ${result.timeframe}</div>
                            ${result.note ? `<div><strong>å¤‡æ³¨:</strong> ${result.note}</div>` : ''}
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `<div class="error">è®¡ç®—å¤±è´¥: ${result.error}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">è®¡ç®—é”™è¯¯: ${error.message}</div>`;
            }
        }

        function showDetailedData() {
            const services = database.getServices('ä¸‡é‚¦ç‰©æµ');
            const output = document.getElementById('detailed-output');
            
            let html = '<div style="margin-top: 20px;">';
            
            Object.keys(services).forEach(serviceName => {
                html += `<h4>${serviceName}</h4>`;
                const countries = database.getCountries('ä¸‡é‚¦ç‰©æµ', serviceName);
                
                countries.forEach(country => {
                    const countryData = database.getCountryData('ä¸‡é‚¦ç‰©æµ', serviceName, country);
                    html += `
                        <div style="margin-left: 20px; margin-bottom: 10px; padding: 10px; border: 1px solid #eee; border-radius: 4px;">
                            <strong>${country}</strong> - ${countryData.code}<br>
                            æ—¶æ•ˆ: ${countryData.timeframe}<br>
                            é‡é‡é™åˆ¶: ${countryData.weightLimit}KG<br>
                            ${countryData.sizeLimit ? `å°ºå¯¸é™åˆ¶: ${countryData.sizeLimit}<br>` : ''}
                            ${countryData.note ? `å¤‡æ³¨: ${countryData.note}<br>` : ''}
                            ä»·æ ¼æ®µæ•°: ${countryData.priceRanges ? countryData.priceRanges.length : 0}
                            ${countryData.hasZones ? '<br><strong>åŒ…å«åˆ†åŒºå®šä»·</strong>' : ''}
                            ${countryData.isFirstContinue ? '<br><strong>é¦–é‡ç»­é‡è®¡è´¹</strong>' : ''}
                        </div>
                    `;
                });
            });
            
            html += '</div>';
            output.innerHTML = html;
        }

        // äº‹ä»¶ç›‘å¬
        document.getElementById('service-select').addEventListener('change', onServiceChange);
        document.getElementById('country-select').addEventListener('change', onCountryChange);
    </script>
</body>
</html> 